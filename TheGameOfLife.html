<!DOCTYPE html>
<!-- --------------------------------------- Html Starts Here --------------------------------------------- -->
<html lang="en"> 
<head>
	<meta charset="utf-8"/>
	<script
	src="https://code.jquery.com/jquery-2.2.4.min.js"
	integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
	crossorigin="anonymous"></script>
	<head>
		<title>The Game of Life</title>
	</head>
	<body>
		<div class="header"><h1>The Game Of Life</h1></div>
		<div id="textgroup">
			<div>
				<span>Number of Rows:</span>
				<input id="numOfRow" type="text" value="6" placeholder="Add a Number" />
			</div>
			<div>
				<span>Number of Columns:</span>
				<input id="numOfCol" type="text" value="8" placeholder="Add a Number"/>
			</div>
		</div>
		<div id="buttongroup">
			<button id="btnKill">Kill All</button>
			<button id="reset">Reset</button>
			<button id="btnRv">Revive All</button>
		</div>
		<div class="table-wrapper">
			<table>
				<tbody>
				</tbody>
			</table>
		</div>
		<div id="submit">
			<button id="prev">Prev</button>
			<button id="next">Next</button>
		</div>
	</body>
	</html>

	<!-- --------------------------------------- Html Ends Here --------------------------------------------- -->


	<!-- --------------------------------------- Script Starts Here --------------------------------------------- -->
	<script>

	//Stack to hold previous turns 
	var previous = [];

//onready function
$(function(){

	//Create the default table on startup
	createTable(8,6)

	/*
	Assign listener to column and row input
	to update the table to the new size
	*/
	$("#numOfRow, #numOfCol").on("keyup", function(){
		var rows = $("#numOfRow").val();
		var columns = $("#numOfCol").val();
		createTable(columns, rows);
	});

	//Add listner to revive button to set all cells to visible
	$("#btnRv").on("click",function(){
		/*
		For ease just clear previous states when revive all is pushed
		*/
		previous = [];
		$("div.cell:hidden").show();
	});

	//Add listener to kill button to hide all cells
	$("#btnKill").on("click",function(){
		/*
		For ease just clear previous states when kill all is pushed
		*/
		previous = [];
		$("div.cell:visible").hide();
	});

	/*
	Add listener to table body to listen when a td
	is clicked to show or hide cell that way only
	one listener is required.
	*/
	$("tbody").on("click", "td", null, function(){
		$(this).children().toggle();
	});

	//Add listener to reset button to set table back to default
	$("#reset").on("click", function(){
		createTable(8, 6);
		$("#numOfCol").val(8);
		$("#numOfRow").val(6);
	});

	//Add listener to next button to calculate results of turn
	$("#next").on("click", function(){
		var noneAlive = true;	//boolean to stop previous functionality if there are no cells alive
		//get current state to add to previous stack
		var state = $("div.cell").map(function(ind, elem){
			var alive = $(elem).is(":visible"); //get all cells that are alive
			//is there aren't any live cells don't allow previous functionality and don't calculate turn
			if(alive){
				noneAlive = false;
			}
			return alive;
		});
		//if there are live cells process turn
		if(!noneAlive){
			previous.push(state);//save current state
			calcTurn(0); //calculate the turn
			revive();	//revive any dead cells that need reviving
		}
	});

	//add listener to previous button
	$("#prev").on("click", prev);

});

//Creates the 2 dimensional table using the given parameters
function createTable(column, row){
		/*
		For ease just clear previous states when table is resized
		*/
	previous = [];
	$("tbody").empty(); //clear the table
	var c = 0, i = 0, count = 0;
	//insert row to table
	for(i = 0; i < row; i++){
		//insert table row tags
		$("tbody").append("<tr></tr>");
		//insert column to row
		for(c = 0; c < column; c++){
		//insert td and div "cell" into row
		$("tbody tr:last").append("<td><div id='" + count++ + "' class='cell' style='display:none'/></td>");
	}

}
}


/*Calculate the next turn and kill the live cells that need to be killed
written recursively to only kill the cells that need to be killed after all cells have been processed
*/
function calcTurn(index){
	var array = $("div.cell:visible"); //get all live cells
	//if there are live cells process
	if(index < array.size()){
		//get the number of live neighbors
		var numNeighbor = getNumNeighbor(parseInt($(array.get(index)).attr("id")));
		calcTurn(index + 1); //recursive call to avoid killing cells before other cells have been processed
		//if there are less than 2 live neighbors cell dies from under population
		if(numNeighbor < 2){
			$(array.get(index)).hide();
		} 
		//if there are more than 3 live neighbors the cell dies from over population
		else if(numNeighbor > 3){
			$(array.get(index)).hide();
		}
	}
}


/*Returns the number of live neighbors that a live cell has
	and attaches the number of live neighbors a dead cell has 
	to the div "cell" as "deadCheck" property so it can be
	processed after the live cells have been processed

*/
function getNumNeighbor(index){
	var count = 0;	//live neighbor count to be returned
	var allData = $("div.cell");	//all of the cells alive and dead
	var row = parseInt($("#numOfRow").val());	//number of rows
	var col = parseInt($("#numOfCol").val());	//number of columns
		//Check above row if not top row
		if((index - col) >= 0 ){
			//Check vertical Top
			if($(allData.get(index - col)).is(":visible")){
				//if alive increment counter
				count++;
			}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
				if(!$(allData.get(index - col)).hasClass("deadCheck")){
					$(allData.get(index - col)).addClass("deadCheck");
				}
				$(allData.get(index - col)).attr("deadCheck", function(ind, attr){
					return attr ? (parseInt(attr) + 1) : 1;
				});
			}

			//Check Diagonal Top Left
			if((index - col - 1) !== -1
				&& (index - col - 1)%col !== (col - 1) ){
				if($(allData.get(index - col - 1)).is(":visible")){
					//if alive increment counter
					count++;
				}else {
									/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
					if(!$(allData.get(index - col - 1)).hasClass("deadCheck")){
						$(allData.get(index - col - 1)).addClass("deadCheck");
					}
					$(allData.get(index - col - 1)).attr("deadCheck", function(ind, attr){
						return attr ? (parseInt(attr) + 1) : 1;
					});
				}
			}

			//Check Diagonal Top Right
			if((index - col + 1)%col !== 0){
				if($(allData.get(index - col + 1)).is(":visible")){
					//if alive increment counter
					count++;
				}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
					if(!$(allData.get(index - col + 1)).hasClass("deadCheck")){
						$(allData.get(index - col + 1)).addClass("deadCheck");
					}
					$(allData.get(index - col + 1)).attr("deadCheck", function(ind, attr){
						return attr ? (parseInt(attr) + 1) : 1;
					});
				}
			}
		}
		//Check vertical Bottom
		if((index + col) <  row * col){
			if($(allData.get(index + col)).is(":visible")){
				//if alive increment counter
				count++;
			}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
				if(!$(allData.get(index + col)).hasClass("deadCheck")){
					$(allData.get(index + col)).addClass("deadCheck");
				}
				$(allData.get(index + col)).attr("deadCheck", function(ind, attr){
					return attr ? (parseInt(attr) + 1) : 1;
				});
			}


			//Check Diagonal Bottom Left
			if((index + col - 1)%col !== (col - 1) ){
				if($(allData.get(index + col - 1)).is(":visible")){
					//if alive increment counter
					count++;
				}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
					if(!$(allData.get(index + col - 1)).hasClass("deadCheck")){
						$(allData.get(index + col - 1)).addClass("deadCheck");
					}
					$(allData.get(index + col - 1)).attr("deadCheck", function(ind, attr){
						return attr ? (parseInt(attr) + 1) : 1;
					});
				}
			}

			//Check Diagonal Bottom Right
			if((index + col + 1)%col !== 0){
				if($(allData.get(index + col + 1)).is(":visible")){
					//if alive increment counter
					count++;
				}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
					if(!$(allData.get(index + col + 1)).hasClass("deadCheck")){
						$(allData.get(index + col + 1)).addClass("deadCheck");
					}
					$(allData.get(index + col + 1)).attr("deadCheck", function(ind, attr){
						return attr ? (parseInt(attr) + 1) : 1;
					});
				}
			}
		}
		//Check Left
		if((index - 1) !== -1
			&& (index - 1)%col !== (col - 1) ){
			if($(allData.get(index - 1)).is(":visible")){
				//if alive increment counter
				count++;
			}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
				if(!$(allData.get(index - 1)).hasClass("deadCheck")){
					$(allData.get(index - 1)).addClass("deadCheck");
				}
				$(allData.get(index - 1)).attr("deadCheck", function(ind, attr){
					return attr ? (parseInt(attr) + 1) : 1;
				});
			}
		}

			//Check Right
			if((index + 1)%col !== 0){
				if($(allData.get(index + 1)).is(":visible")){
					//if alive increment counter
					count++;
				}else {
				/*
				if neighbor cell is dead increment counter that is attached
				to the dead cell so it can be processed after the live cells
				to avoid reviving the cell and it getting counted when it should not get counted
				*/
					if(!$(allData.get(index + 1)).hasClass("deadCheck")){
						$(allData.get(index + 1)).addClass("deadCheck");
					}
					$(allData.get(index + 1)).attr("deadCheck", function(ind, attr){
						return attr ? (parseInt(attr) + 1) : 1;
					});
				}
			}


			//return count of live neighbors
			return count;
		}


		/*
		Revive cells that need to be revived
		*/
		function revive(){
			//get all cells that have been flagged as neighbors to living cells
			$("div.deadCheck").each(function(ind, elem){
				//if it has exactly 3 live neighbors then revive the cell
				if(parseInt($(elem).attr("deadCheck")) === 3){
					$(elem).show();
				}
				//remove the count and class
				$(elem).removeClass("deadCheck").removeAttr("deadCheck");
			});	
		}

		/*
		Set cells to previous state if there is a previous state and there were live cells in the previous state
		*/
		function prev(){
			//if there is a previous state
			if(previous.length > 0){
				//get previous state
				var lastTurn = previous.pop();
				//get all cells and set to previous state
				$("div.cell").each(function(ind, elem){
					$(elem).hide();
					if(lastTurn[ind]){
						$(elem).show();
					}
				});
			}
		}

	</script>
	<!-- --------------------------------------- Script Ends Here --------------------------------------------- -->

	<!-- --------------------------------------- Style Starts Here --------------------------------------------- -->

	<style>

		body{
			background: LightGoldenrodYellow;
		}

		div.header {
			margin:75px auto;
			width:250px;
		}

		table {
			margin:auto;
			border-collapse: collapse;
			white-space: nowrap;
		}

		div.table-wrapper{
			max-width: 1000px;
			overflow-x: auto;
			clear:both;
			margin:auto;
		}

		tr{
			margin:0;
			padding:0;
			display:block;
		}

		td {
			width:40px;
			height: 40px;
			margin:0;
			padding:0;
			border-style: solid;
			border-width: 1px;
			cursor: pointer; 
			cursor: hand;
			display: inline-block;
		}

		tr td{
			background: peru;
		}

		tr:nth-child(even) td:nth-child(odd), 
		tr:nth-child(odd) td:nth-child(even){
			background: white;
		}

		tr td:hover{
			background: tan;
		}

		tr:nth-child(even) td:nth-child(odd):hover, 
		tr:nth-child(odd) td:nth-child(even):hover{
			background: moccasin;
		}
		div.cell  {
			width:20px;
			height: 20px;
			display: block;
			background: lightblue;
			border-style: solid;
			border-width: 2px;
			border-radius: 100%;
			margin-left: 20%;
			margin-top:20%;
			overflow: hidden;

		}

		div#buttongroup {
			margin:auto;
			clear:left;
			width:490px;

		}

		div#buttongroup * {
			margin: 15px 30px;
			display: inline-block;
		}
		div#textgroup * {	
			margin:auto;
		}

		div#textgroup > :first-child {	
			float:left;
		}

		div#textgroup > :last-child {	
			float:right;
		}

		div#textgroup {
			width:700px;
			margin: auto;
		}

		div#submit {
			width: 500px;
			margin:auto;
		}

		div#submit *{
			margin-top: 10px;
		}

		div#submit > :first-child{
			float:left;
		}

		div#submit > :last-child{
			float:right;
		}

		button {
			border-radius: 5px;
			background: radial-gradient(steelblue, blue);	
			border:none;
			color:white;
			width:100px;
			height:30px;
			cursor: pointer; 
			cursor: hand;
		}

		button:hover{
			background:radial-gradient(orange, red);
		}

		button:active{
			background:radial-gradient(darkorange, darkred);
		}

		span{
			font-family: Constantia, "Lucida Bright", Lucidabright, "Lucida Serif", Lucida, "DejaVu Serif", "Bitstream Vera Serif", "Liberation Serif", Georgia, serif;

		}

		@media (max-width: 715px) {
			div#textgroup {	
				width: 350px;
			}

			div#textgroup * {	
				display:block;
			}
		}

		@media (max-width: 510px) {
			div#submit {
				width:250px;
			}

			div#buttongroup  *{
				margin:10px auto;
			}

			div#buttongroup {
				width:308px;
			}
		}

		@media (max-width: 360px) {
			div#textgroup {	
				width: 200px;
				clear:both;
			}

			div#textgroup > :first-child {	
				float:none;
			}	

			div#textgroup > :last-child {	
				float:none;
			}

			div.header {
				width:150px;
			}
		}

	</style>

	<!-- --------------------------------------- Style Ends Here --------------------------------------------- -->

	<!-- --------------------------------------- Tests Start Here --------------------------------------------- -->

	<script>

	/*
	For brevity I wrote the tests as a function that can be run in the browser.
	This is not prefered. The tests should be written in a testing framework such as QUnit
	*/

		function tests(){
			//////////Test creatTable/////////////
			(function testCreateTable1By1(){
				createTable(1,1);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();


			(function testCreateTable2By1(){
				createTable(2,1);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
							+ '<td><div id="1" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testCreateTable1By2(){
				createTable(1,2);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td></tr>'
							+ '<tr><td><div id="1" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();
			
			(function testCreateTable2By2(){
				createTable(2,2);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div>'
									+'</td><td><div id="1" class="cell" style="display:none"></div></td></tr>'
							+ '<tr><td><div id="2" class="cell" style="display:none"></div>'
									+'</td><td><div id="3" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testCreateTable3By1(){
				createTable(3,1);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td>'
								+ '<td><div id="2" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();


			(function testCreateTable2By3(){
				createTable(2,3);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="2" class="cell" style="display:none"></div></td>'
								+ '<td><div id="3" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="4" class="cell" style="display:none"></div></td>'
								+ '<td><div id="5" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testCreateTable1By3(){
				createTable(1,3);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="1" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="2" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testCreateTable3By2(){
				createTable(3,2);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td>'
								+ '<td><div id="2" class="cell" style="display:none"></div></td></tr>'
								+'<tr><td><div id="3" class="cell" style="display:none"></div></td>'
								+ '<td><div id="4" class="cell" style="display:none"></div></td>'
								+ '<td><div id="5" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testCreateTable3By3(){
				createTable(3,3);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td>'
								+ '<td><div id="2" class="cell" style="display:none"></div></td></tr>'
								+'<tr><td><div id="3" class="cell" style="display:none"></div></td>'
								+ '<td><div id="4" class="cell" style="display:none"></div></td>'
								+ '<td><div id="5" class="cell" style="display:none"></div></td></tr>'
								+'<tr><td><div id="6" class="cell" style="display:none"></div></td>'
								+ '<td><div id="7" class="cell" style="display:none"></div></td>'
								+ '<td><div id="8" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();


			///////////Test getNumNeighbor//////////

			(function testTopRightCornerNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper();
				var numNbr = getNumNeighbor(7);
				var passOrFail = numNbr === 3 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);

			})();

			(function test8Neighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper();
				var numNbr = getNumNeighbor(19);
				var passOrFail = numNbr === 8 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testNoNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var numNbr = getNumNeighbor(19);
				var passOrFail = numNbr === 0 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testTopLeftCornerNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper();
				var numNbr = getNumNeighbor(0);
				var passOrFail = numNbr === 3 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);

			})();

			(function testRightSideNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(8, 14, 15, 16, 22, 23, 24, 30, 31);
				var numNbr = getNumNeighbor(23);
				var passOrFail = numNbr === 5 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();
			
			(function testLeftSideNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(8, 9, 15, 16, 17, 23, 24, 25, 31);
				var numNbr = getNumNeighbor(17);
				var passOrFail = numNbr === 5 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testTopSideNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(3, 4, 5, 11, 12, 13, 43, 44, 45);
				var numNbr = getNumNeighbor(4);
				var passOrFail = numNbr === 5 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testBottomSideNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(3, 4, 5, 35, 36, 37, 43, 44, 45);
				var numNbr = getNumNeighbor(44);
				var passOrFail = numNbr === 5 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testRightSideDeadCellNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var a = [8, 14, 15, 16, 22, 23, 24, 30, 31];
				for (var i = 0; i < a.length; i++) {
					getNumNeighbor(a[i]);
				}
				var passOrFail = ($('div#7').attr('deadCheck') == 2
					&& $('div#39').attr('deadCheck') == 2) ?  ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();
			
			(function testLeftSideDeadCellNeighbors(){
				createTable(8,6);
				var a = [8, 9, 15, 16, 17, 23, 24, 25, 31];
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(8, 9, 15, 16, 17, 23, 24, 25, 31);
				for (var i = 0; i < a.length; i++) {
					getNumNeighbor(a[i]);
				}
				var passOrFail = ($('div#0').attr('deadCheck') == 2
					&& $('div#32').attr('deadCheck') == 2) ?  ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testTopSideDeadCellNeighbors(){
				createTable(8,6);
				var a = [3, 4, 5, 11, 12, 13, 43, 44, 45];
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(3, 4, 5, 11, 12, 13, 43, 44, 45);
				for (var i = 0; i < a.length; i++) {
					getNumNeighbor(a[i]);
				}
				var passOrFail = ($('div#2').attr('deadCheck') == 2
					&& $('div#6').attr('deadCheck') == 2) ?  ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testBottomSideDeadCellNeighbors(){
				createTable(8,6);
				var a = [3, 4, 5, 35, 36, 37, 43, 44, 45];
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(3, 4, 5, 35, 36, 37, 43, 44, 45);
				for (var i = 0; i < a.length; i++) {
					getNumNeighbor(a[i]);
				}
				var passOrFail = ($('div#42').attr('deadCheck') == 2
					&& $('div#46').attr('deadCheck') == 2) ?  ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testDeadCellAllNeighbors(){
				createTable(8,6);
				var a = [27, 28, 29, 35, 37, 43, 44, 45];
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(3, 4, 5, 35, 37, 43, 44, 45);
				for (var i = 0; i < a.length; i++) {
					getNumNeighbor(a[i]);
				}
				var passOrFail = $('div#36').attr('deadCheck') == 8 ?  ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();

			(function testNegativeOneOverflowNeighbors(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				setCellHelper(0, 1, 16);
				var numNbr = getNumNeighbor(8);
				var passOrFail = numNbr === 3 ? ' Passed!!!' : ' Failed!!!';
				console.log(name + passOrFail);
			})();
			///////////Test prev//////////////////

			(function testRestoreAll(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				previous = [];
				var previousState = [];
				for(var i = 0; i < 48; i++){
					previousState[i] = true;
				}
				previous.push(previousState);
				prev();
				$('div.cell').each(function(ind, elem){
					if($(elem).is(':hidden')){
					console.log(name + ' Failed!!!');		
					}
				});
				console.log(name + ' Passed!!!');
			})();

			(function testRestoreEven(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				previous = [];
				var previousState = [];
				for(var i = 0; i < 48; i++){
					previousState[i] = i%2 === 0 ? true : false;
				}
				previous.push(previousState);
				prev();
				for(var i = 0; i < $('div.cell').length; i++){
					if((i%2 === 0 && $($('div.cell').get(i)).is(':hidden'))
						|| (i%2 === 1 && $($('div.cell').get(i)).is(':visible'))){
							console.log(name + ' Failed!!!');
						return;
						}
				}

				console.log(name + ' Passed!!!');
			})();

			(function testRestoreOdd(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				previous = [];
				var previousState = [];
				for(var i = 0; i < 48; i++){
					previousState[i] = i%2 === 1 ? true : false;
				}
				previous.push(previousState);
				prev();
				for(var i = 0; i < $('div.cell').length; i++){
					if((i%2 === 1 && $($('div.cell').get(i)).is(':hidden'))
						|| (i%2 === 0 && $($('div.cell').get(i)).is(':visible'))){
							console.log(name + ' Failed!!!');
						return;
						}
				}

				console.log(name + ' Passed!!!');
			})();

			////////////Test revive///////////////

			(function testReviveCellsEven(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('div.cell').each(function(ind, elem){
					if(ind%2 === 0){
						$(elem).addClass("deadCheck").attr('deadCheck', 3);
					}
				});

				revive();
				for(var i = 0; i < $('div.cell').length; i++){
					if(($($('div.cell').get(i)).attr('id')%2 === 0
						&& $($('div.cell').get(i)).is(':hidden'))
						|| ($($('div.cell').get(i)).attr('id')%2 === 1
						&& $($('div.cell').get(i)).is(':visible'))){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testReviveCellsOdd(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('div.cell').each(function(ind, elem){
					if(ind%2 === 1){
						$(elem).addClass("deadCheck").attr('deadCheck', 3);
					}
				});

				revive();
				for(var i = 0; i < $('div.cell').length; i++){
					if(($($('div.cell').get(i)).attr('id')%2 === 1
						&& $($('div.cell').get(i)).is(':hidden'))
						|| ($($('div.cell').get(i)).attr('id')%2 === 0
						&& $($('div.cell').get(i)).is(':visible'))){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testLessThan3ReviveCells(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('div.cell').each(function(ind, elem){
					if(ind%2 === 1){
						$(elem).addClass("deadCheck").attr('deadCheck', 2);
					} else if(ind%2 === 0){
						$(elem).addClass("deadCheck").attr('deadCheck', 1);
					}
				});

				revive();
				for(var i = 0; i < $('div.cell').length; i++){
					if($($('div.cell').get(i)).is(':visible')){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testMoreThan3ReviveCells(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('div.cell').each(function(ind, elem){
						$(elem).addClass("deadCheck").attr('deadCheck', ind + 4);
				});

				revive();
				for(var i = 0; i < $('div.cell').length; i++){
					if($($('div.cell').get(i)).is(':visible')){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testMixedLessThan3Equal3MoreThan3ReviveCells(){
				createTable(10,10);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('div.cell').each(function(ind, elem){
						$(elem).addClass("deadCheck").attr('deadCheck', (ind%5) + 1);
				});
				var expected = [2,7,12,17,22,27,32,37,42,47,52,57,62,67,72,77,82,87,92,97];
				revive();
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();


			///////////Test calcTurn//////////////

			(function testCalcTurnMoreThan3Neighbors(){
				createTable(8,6);
				setCellHelper(11, 12, 19, 20, 28);
				calcTurn(0);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [11, 12, 28];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testCalcTurnLessThan2Neighbors(){
				createTable(8,6);
				setCellHelper(11, 19);
				calcTurn(0);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if(current.is(':visible')){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();


			(function testCalcTurn3Neighbors(){
				createTable(8,6);
				setCellHelper(11, 12, 19, 20);
				calcTurn(0);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [11, 12, 19, 20];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testCalcTurn2Neighbors(){
				createTable(8,6);
				setCellHelper(11, 12, 20);
				calcTurn(0);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [11, 12, 20];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			////////////Test revive all button///////

			(function testReviveAllBtn(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#btnRv').click();
				$('div.cell').each(function(ind, elem){
					if(!$(elem).is(':visible')){
						console.log(name + " Failed!!!");
					}
				})
						console.log(name + " Passed!!!");
			})();
		

			////////////Test kill all button///////

			(function testKillAllBtn(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#btnKill').click();
				$('div.cell').each(function(ind, elem){
					if($(elem).is(':visible')){
						console.log(name + " Failed!!!");
					}
				})
						console.log(name + " Passed!!!");
			})();
		
		
	
	////////////Test reset button///////

			(function testResetBtn(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#reset').click();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td><td><div id="1" class="cell" style="display:none"></div></td><td><div id="2" class="cell" style="display:none"></div></td><td><div id="3" class="cell" style="display:none"></div></td><td><div id="4" class="cell" style="display:none"></div></td><td><div id="5" class="cell" style="display:none"></div></td><td><div id="6" class="cell" style="display:none"></div></td><td><div id="7" class="cell" style="display:none"></div></td></tr>'
				+'<tr><td><div id="8" class="cell" style="display:none"></div></td><td><div id="9" class="cell" style="display:none"></div></td><td><div id="10" class="cell" style="display:none"></div></td><td><div id="11" class="cell" style="display:none"></div></td><td><div id="12" class="cell" style="display:none"></div></td><td><div id="13" class="cell" style="display:none"></div></td><td><div id="14" class="cell" style="display:none"></div></td><td><div id="15" class="cell" style="display:none"></div></td></tr>'
				+'<tr><td><div id="16" class="cell" style="display:none"></div></td><td><div id="17" class="cell" style="display:none"></div></td><td><div id="18" class="cell" style="display:none"></div></td><td><div id="19" class="cell" style="display:none"></div></td><td><div id="20" class="cell" style="display:none"></div></td><td><div id="21" class="cell" style="display:none"></div></td><td><div id="22" class="cell" style="display:none"></div></td><td><div id="23" class="cell" style="display:none"></div></td></tr>'
				+'<tr><td><div id="24" class="cell" style="display:none"></div></td><td><div id="25" class="cell" style="display:none"></div></td><td><div id="26" class="cell" style="display:none"></div></td><td><div id="27" class="cell" style="display:none"></div></td><td><div id="28" class="cell" style="display:none"></div></td><td><div id="29" class="cell" style="display:none"></div></td><td><div id="30" class="cell" style="display:none"></div></td><td><div id="31" class="cell" style="display:none"></div></td></tr>'
				+'<tr><td><div id="32" class="cell" style="display:none"></div></td><td><div id="33" class="cell" style="display:none"></div></td><td><div id="34" class="cell" style="display:none"></div></td><td><div id="35" class="cell" style="display:none"></div></td><td><div id="36" class="cell" style="display:none"></div></td><td><div id="37" class="cell" style="display:none"></div></td><td><div id="38" class="cell" style="display:none"></div></td><td><div id="39" class="cell" style="display:none"></div></td></tr>'
				+'<tr><td><div id="40" class="cell" style="display:none"></div></td><td><div id="41" class="cell" style="display:none"></div></td><td><div id="42" class="cell" style="display:none"></div></td><td><div id="43" class="cell" style="display:none"></div></td><td><div id="44" class="cell" style="display:none"></div></td><td><div id="45" class="cell" style="display:none"></div></td><td><div id="46" class="cell" style="display:none"></div></td><td><div id="47" class="cell" style="display:none"></div></td></tr>';

				$('div.cell').each(function(ind, elem){
					if($(elem).is(':visible')){
						console.log(name + " Failed!!!");
					}
				})

				var actual = $('tbody').html();
				var rowNum = $('#numOfRow').val();
				var colNum = $('#numOfCol').val();

				if(expected === actual
					&& rowNum == 6
					&& colNum == 8){
						console.log(name + " Passed!!!");
					return;
				}

				console.log(name + " Failed!!!");
			})();
		
			//////////Test textfields keyup event/////////////
			(function testKeyUp1By1(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(1);
				$('#numOfCol').val(1);
				$('#numOfRow').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();


			(function testKeyUp2By1(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(1);
				$('#numOfCol').val(2);
				$('#numOfCol').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
							+ '<td><div id="1" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testKeyUp1By2(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(2);
				$('#numOfCol').val(1);
				$('#numOfRow').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td></tr>'
							+ '<tr><td><div id="1" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();
			
			(function testKeyUp2By2(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(2);
				$('#numOfCol').val(2);
				$('#numOfCol').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div>'
									+'</td><td><div id="1" class="cell" style="display:none"></div></td></tr>'
							+ '<tr><td><div id="2" class="cell" style="display:none"></div>'
									+'</td><td><div id="3" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testKeyUp3By1(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(1);
				$('#numOfCol').val(3);
				$('#numOfRow').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td>'
								+ '<td><div id="2" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();


			(function testKeyUp2By3(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(3);
				$('#numOfCol').val(2);
				$('#numOfCol').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="2" class="cell" style="display:none"></div></td>'
								+ '<td><div id="3" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="4" class="cell" style="display:none"></div></td>'
								+ '<td><div id="5" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testKeyUp1By3(){
				createTable(8,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(3);
				$('#numOfCol').val(1);
				$('#numOfRow').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="1" class="cell" style="display:none"></div></td></tr>'
								+ '<tr><td><div id="2" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testKeyUp3By2(){
				createTable(3,6);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(2);
				$('#numOfCol').val(3);
				$('#numOfRow').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td>'
								+ '<td><div id="2" class="cell" style="display:none"></div></td></tr>'
								+'<tr><td><div id="3" class="cell" style="display:none"></div></td>'
								+ '<td><div id="4" class="cell" style="display:none"></div></td>'
								+ '<td><div id="5" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();

			(function testKeyUp3By3(){
				createTable(8,3);
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				$('#numOfRow').val(3);
				$('#numOfCol').val(3);
				$('#numOfCol').keyup();
				var expected = '<tr><td><div id="0" class="cell" style="display:none"></div></td>'
								+ '<td><div id="1" class="cell" style="display:none"></div></td>'
								+ '<td><div id="2" class="cell" style="display:none"></div></td></tr>'
								+'<tr><td><div id="3" class="cell" style="display:none"></div></td>'
								+ '<td><div id="4" class="cell" style="display:none"></div></td>'
								+ '<td><div id="5" class="cell" style="display:none"></div></td></tr>'
								+'<tr><td><div id="6" class="cell" style="display:none"></div></td>'
								+ '<td><div id="7" class="cell" style="display:none"></div></td>'
								+ '<td><div id="8" class="cell" style="display:none"></div></td></tr>';
				var actual = $("tbody").html();
				if(expected === actual){
					console.log(name + " Passed!!!");
					return;
				}
				console.log(name + " Failed");
			})();
		

			////////////Test Next Btn////////////////

			(function testNextBtnMoreThan3NeighborsDie(){
				createTable(8,6);
				$('#numOfRow').val(6);
				$('#numOfCol').val(8);
				setCellHelper(11, 12, 19, 20, 28);
				$('#next').click();
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [11, 12, 21, 27, 28];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();


			(function testNextBtn3NeighborsRevive(){
				createTable(8,6);
				$('#numOfRow').val(6);
				$('#numOfCol').val(8);
				setCellHelper(10, 25, 27);
				$('#next').click();
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [18];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testNextBtnLessThan2Neighbors(){
				createTable(8,6);
				$('#numOfRow').val(6);
				$('#numOfCol').val(8);
				setCellHelper(11, 19);
				$('#next').click();
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if(current.is(':visible')){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();


			(function testNextBtn3Neighbors(){
				createTable(8,6);
				$('#numOfRow').val(6);
				$('#numOfCol').val(8);
				setCellHelper(11, 12, 19, 20);
				$('#next').click();
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [11, 12, 19, 20];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			(function testNextBtn2Neighbors(){
				createTable(8,6);
				$('#numOfRow').val(6);
				$('#numOfCol').val(8);
				setCellHelper(11, 12, 20);
				$('#next').click();
				var name = arguments.callee.toString().match(/function ([^\(]+)/)[1];
				var expected = [11, 12, 19, 20];
				for(var i = 0; i < $('div.cell').length; i++){
					var current = $($('div.cell').get(i));
					if((current.is(':visible') && $.inArray(parseInt(current.attr('id')), expected) === -1)
						|| (current.is(':hidden') && $.inArray(parseInt(current.attr('id')), expected) !== -1)){
							console.log(name + ' Failed!!!');
							return;			
						}
				}
				console.log(name + ' Passed!!!');
			})();

			//Reset the app
			$('#numOfRow').val(6);
			$('#numOfCol').val(8);
			createTable(8,6);
	}

	function setCellHelper(cellId){
		if(arguments.length === 0){
			$('div.cell:hidden').show();
		}

		for(var i = 0; i < arguments.length; i++){
			$('div#' + arguments[i]).show();
		}
	}

	</script>

	<!-- --------------------------------------- Tests End Here --------------------------------------------- -->
